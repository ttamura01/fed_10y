rename(tn_10y = dgs10)
treasury_note <- treasury_note %>%
filter(!is.na(tn_10y)) %>%
mutate(tn_10y = suppressWarnings(as.numeric(tn_10y)))
mortgage <- read_csv("https://fred.stlouisfed.org/graph/fredgraph.csv?bgcolor=%23e1e9f0&chart_type=line&drp=0&fo=open%20sans&graph_bgcolor=%23ffffff&height=450&mode=fred&recession_bars=on&txtcolor=%23444444&ts=12&tts=12&width=1320&nt=0&thu=0&trc=0&show_legend=yes&show_axis_titles=yes&show_tooltip=yes&id=MORTGAGE30US&scale=left&cosd=1971-04-02&coed=2024-08-29&line_color=%234572a7&link_values=false&line_style=solid&mark_type=none&mw=3&lw=2&ost=-99999&oet=99999&mma=0&fml=a&fq=Weekly%2C%20Ending%20Thursday&fam=avg&fgst=lin&fgsnd=2020-02-01&line_index=1&transformation=lin&vintage_date=2024-08-30&revision_date=2024-08-30&nd=1971-04-02") %>%
rename_all(tolower)
fedfunds_data <- fed_rate %>%
mutate(date = ymd(date))
treasury_note_data <- treasury_note %>%
mutate(date = ymd(date)) %>%
group_by(month = floor_date(date, "month")) %>%
summarise(tn_10y = mean(tn_10y, na.rm = TRUE))
mortgage_data <- mortgage %>%
mutate(date = ymd(date)) %>%
group_by(month = floor_date(date, "month")) %>%
summarise(mortgage30us = mean(mortgage30us, na.rm = TRUE))
merged_data <- mortgage_data %>%
inner_join(fedfunds_data, by = c("month" = "date")) %>%
inner_join(., treasury_note_data, by = "month")
updates <- tribble(~ month, ~mortgage30us, ~fedfunds, ~tn_10y,
"2024-08-01", 6.35, 5.33, 3.87)
merged_data <- rbind(merged_data, updates)
head(merged_data)
tail(merged_data)
filtered_data <- merged_data %>%
filter(month >= "1989-01-01" & month < "2024-09-01")
head(filtered_data, 10)
tail(filtered_data, 10)
long_data <- filtered_data %>%
pivot_longer(cols = -month, names_to = "rates", values_to = "percentage")
ggplot(long_data, aes(x = month, y = percentage, color = rates)) +
geom_line() +
labs(title = "Historical relation between Fedfund Rate, US 10-year Treasury yield, and 30-year mortgage rate",
x = NULL, y = NULL,
caption = "Source: FRED(Federal Reserve Economic Data), WSJ"
) +
theme(legend.key = element_blank(),
legend.title = element_blank(),
plot.title.position = "plot",
plot.title = element_textbox_simple()
)
max(filtered_data$mortgage30us)
ggplot(long_data, aes(x = month, y = percentage, color = rates)) +
geom_line() +
labs(title = "Historical relation between Fedfund Rate, US 10-year Treasury yield, and 30-year mortgage rate",
subtitle = "6 major rate-cuts: 1) Gulf-war, 2) Mid-cycle, 3) Global currency crisis, 4) Dot-com burst & 911, 5) Housing crisis(GFC), 6) Covid-19",
x = NULL, y = NULL,
caption = "Source: FRED(Federal Reserve Economic Data), WSJ"
) +
theme(legend.key = element_blank(),
legend.title = element_blank(),
plot.title.position = "plot",
plot.title = element_textbox_simple()
)
ggplot(long_data, aes(x = month, y = percentage, color = rates)) +
geom_line() +
labs(title = "Historical relation between Fedfund Rate, US 10-year Treasury yield, and 30-year mortgage rate",
subtitle = "6 major rate-cuts: 1) Gulf-war, 2) Mid-cycle, 3) Global currency crisis, 4) Dot-com burst & 911, 5) Housing crisis(GFC), 6) Covid-19",
x = NULL, y = NULL,
caption = "Source: FRED(Federal Reserve Economic Data), WSJ"
) +
theme(legend.key = element_blank(),
legend.title = element_blank(),
plot.title.position = "plot",
plot.title = element_textbox_simple(),
plot.subtitle = element_textbox_simple()
)
library(tidyverse)
library(glue)
library(ggtext)
data <- read_csv("/Users/takayukitamura/Documents/R_Computing/fed_10y/fed_mortgage .csv") %>%
rename(rate_cut = ...1, percent_precut = `Pre-Fed's Rate-cut`, percent_postcut = `Post-Fed's Rate-cut`) %>%
mutate(bump_precut = if_else(percent_precut > percent_postcut,
percent_precut +1.0,
percent_precut -1.0),
bump_postcut = if_else(percent_precut > percent_postcut,
percent_postcut -1.0,
percent_postcut +1.0))
data
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_")
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_") %>%
mutate(rate_cut = factor(rate_cut, levels = rev(data$rate_cut)))
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_")
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_") %>%
#  mutate(rate_cut = factor(rate_cut, levels = rev(data$rate_cut))) %>%
ggplot(aes(x=percent, y= rate_cut, color = change))
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_") %>%
#  mutate(rate_cut = factor(rate_cut, levels = rev(data$rate_cut))) %>%
ggplot(aes(x=percent, y= rate_cut, color = change)) +
geom_line(color="#E6E6E6", size=1.75)
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_") %>%
#  mutate(rate_cut = factor(rate_cut, levels = rev(data$rate_cut))) %>%
ggplot(aes(x=percent, y= rate_cut, color = change)) +
geom_line(color="#E6E6E6", size=1.75) +
geom_point(size = 2, show.legend = FALSE)
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_") %>%
#  mutate(rate_cut = factor(rate_cut, levels = rev(data$rate_cut))) %>%
ggplot(aes(x=percent, y= rate_cut, color = change)) +
geom_line(color="#E6E6E6", size=1.75) +
geom_point(size = 2, show.legend = FALSE) +
geom_text(aes(label=glue("{percent}%"), x=bump), size=4,  show.legend = FALSE)
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_") %>%
mutate(rate_cut = factor(rate_cut, levels = rev(data$rate_cut))) %>%
ggplot(aes(x=percent, y= rate_cut, color = change)) +
geom_line(color="#E6E6E6", size=1.75) +
geom_point(size = 2, show.legend = FALSE) +
geom_text(aes(label=glue("{percent}%"), x=bump), size=4,  show.legend = FALSE) +
scale_color_manual(name=NULL,
breaks = c("precut", "postcut"),
values = c("#727272", "#25607a"),
labels=c("Pre_rate_cut", "Post_rate_cut"))
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_") %>%
mutate(rate_cut = factor(rate_cut, levels = rev(data$rate_cut))) %>%
ggplot(aes(x=percent, y= rate_cut, color = change)) +
geom_line(color="#E6E6E6", size=1.75) +
geom_point(size = 2, show.legend = FALSE) +
geom_text(aes(label=glue("{percent}%"), x=bump), size=4,  show.legend = FALSE) +
scale_color_manual(name=NULL,
breaks = c("precut", "postcut"),
values = c("#727272", "#25607a"),
labels=c("Pre_rate_cut", "Post_rate_cut"))
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_") %>%
mutate(rate_cut = factor(rate_cut, levels = rev(data$rate_cut))) %>%
ggplot(aes(x=percent, y= rate_cut, color = change)) +
geom_line(color="#E6E6E6", size=1.75) +
geom_point(size = 2, show.legend = FALSE) +
geom_text(aes(label=glue("{percent}%"), x=bump), size=4,  show.legend = FALSE) +
scale_color_manual(name=NULL,
breaks = c("precut", "postcut"),
values = c("#727272", "#25607a"),
labels=c("Pre_rate_cut", "Post_rate_cut")) +
scale_x_continuous(limits = c(2, 12),
breaks = seq(2, 12, by=2),
labels = glue("{seq(2,12, by=2)}%"))
main_plot <- data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_") %>%
mutate(rate_cut = factor(rate_cut, levels = rev(data$rate_cut))) %>%
ggplot(aes(x=percent, y= rate_cut, color = change)) +
geom_line(color="#E6E6E6", size=1.75) +
geom_point(size = 2, show.legend = FALSE) +
geom_text(aes(label=glue("{percent}%"), x=bump), size=4,  show.legend = FALSE) +
scale_color_manual(name=NULL,
breaks = c("precut", "postcut"),
values = c("#727272", "#25607a"),
labels=c("Pre_rate_cut", "Post_rate_cut")) +
scale_x_continuous(limits = c(2, 12),
breaks = seq(2, 12, by=2),
labels = glue("{seq(2,12, by=2)}%")) +
labs(x = NULL,
y = NULL,
title = "30-year mortgage rate changes pre- & post-Fed's Rate Cut Decisions since 1990",
caption = "Source: FRED(Rederal Reserve Economic Data") +
theme(
plot.title.position = "plot",
plot.title = element_textbox_simple(),
plot.caption = element_markdown(hjust = 0, color = "darkgray"),
plot.caption.position = "plot",
panel.background = element_blank(),
axis.ticks = element_blank(),
axis.text.x = element_text(color = "darkgray"),
panel.grid.major.x = element_line(color = "gray", size = 0.1),
panel.grid.major.y = element_line(color = "gray", size = 0.1, linetype = "dotted")
)
ggsave("30_year_mortgage_fed.png", width = 6, height = 4)
main_plot
library(tidyverse)
library(glue)
library(ggtext)
library(grid)
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_")
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_") %>%
mutate(rate_cut = factor(rate_cut, levels = rev(data$rate_cut)))
data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_") %>%
mutate(rate_cut = factor(rate_cut, levels = rev(data$rate_cut))) %>%
group_by(rate_cut) %>%
mutate(x = percent[change == "precut"],
xend = percent[change == "postcut"]) %>%
ungroup()
ggplot(long_data, aes(x = percent, y = rate_cut, color = change)) +
geom_line(color = "gray", size = 1.5)
long_data <- data %>%
pivot_longer(cols = -rate_cut, names_to = c(".value", "change"),
names_sep = "_") %>%
mutate(rate_cut = factor(rate_cut, levels = rev(data$rate_cut))) %>%
group_by(rate_cut) %>%
mutate(x = percent[change == "precut"],
xend = percent[change == "postcut"]) %>%
ungroup()
ggplot(long_data, aes(x = percent, y = rate_cut, color = change))
ggplot(long_data, aes(x = percent, y = rate_cut, color = change)) +
geom_line(color = "gray", size = 1.5)
ggplot(long_data, aes(x = percent, y = rate_cut, color = change)) +
geom_line(color = "gray", size = 1.5) +
geom_point(size = 2, show.legend = FALSE)
ggplot(long_data, aes(x = percent, y = rate_cut, color = change)) +
geom_line(color = "gray", size = 1.5) +
geom_point(size = 2, show.legend = FALSE) +
geom_segment(aes(x = x, xend = xend,
y = rate_cut, yend = rate_cut),
arrow = arrow(length = unit(0.4, "cm")),
color = "black", size = 0.75)
ggplot(long_data, aes(x = percent, y = rate_cut, color = change)) +
geom_line(color = "gray", size = 1.5) +
geom_point(size = 2, show.legend = FALSE) +
geom_segment(aes(x = x, xend = xend,
y = rate_cut, yend = rate_cut),
arrow = arrow(length = unit(0.3, "cm")),
color = "black", size = 0.75)
ggplot(long_data, aes(x = percent, y = rate_cut, color = change)) +
geom_line(color = "gray", size = 1.5) +
geom_point(size = 2, show.legend = FALSE) +
geom_segment(aes(x = x, xend = xend,
y = rate_cut, yend = rate_cut),
arrow = arrow(length = unit(0.3, "cm")),
color = "black", size = 0.75) +
geom_text(aes(label = glue("{percent}%"), x = bump), size = 4,  show.legend = FALSE)
ggplot(long_data, aes(x = percent, y = rate_cut, color = change)) +
geom_line(color = "gray", size = 1.5) +
geom_point(size = 2, show.legend = FALSE) +
geom_segment(aes(x = x, xend = xend,
y = rate_cut, yend = rate_cut),
arrow = arrow(length = unit(0.3, "cm")),
color = "black", size = 0.75) +
geom_text(aes(label = glue("{percent}%"), x = bump), size = 4,  show.legend = FALSE) +
scale_color_manual(name = NULL,
breaks = c("precut", "postcut"),
values = c("#727272", "#25607a"),
labels = c("Pre-rate cut", "Post-rate cut"))
main_plot <- ggplot(long_data, aes(x = percent, y = rate_cut, color = change)) +
geom_line(color = "gray", size = 1.5) +
geom_point(size = 2, show.legend = FALSE) +
geom_segment(aes(x = x, xend = xend,
y = rate_cut, yend = rate_cut),
arrow = arrow(length = unit(0.3, "cm")),
color = "black", size = 0.75) +
geom_text(aes(label = glue("{percent}%"), x = bump), size = 4,  show.legend = FALSE) +
scale_color_manual(name = NULL,
breaks = c("precut", "postcut"),
values = c("#727272", "#25607a"),
labels = c("Pre-rate cut", "Post-rate cut")) +
scale_x_continuous(limits = c(2, 12),
breaks = seq(2, 12, by = 2),
labels = glue("{seq(2, 12, by = 2)}%"))
main_plot <- ggplot(long_data, aes(x = percent, y = rate_cut, color = change)) +
geom_line(color = "gray", size = 1.5) +
geom_point(size = 2, show.legend = FALSE) +
geom_segment(aes(x = x, xend = xend,
y = rate_cut, yend = rate_cut),
arrow = arrow(length = unit(0.3, "cm")),
color = "black", size = 0.75) +
geom_text(aes(label = glue("{percent}%"), x = bump), size = 4,  show.legend = FALSE) +
scale_color_manual(name = NULL,
breaks = c("precut", "postcut"),
values = c("#727272", "#25607a"),
labels = c("Pre-rate cut", "Post-rate cut")) +
scale_x_continuous(limits = c(2, 12),
breaks = seq(2, 12, by = 2),
labels = glue("{seq(2, 12, by = 2)}%")) +
labs(x = NULL,
y = NULL,
title = "30-year mortgage rate changes post-Fed's Rate Cut Decisions since 1990",
subtitle = "sverage impact 0.9% relatively mild, since rate cuts were priced in the markets in advance",
caption = "Source: FRED (Federal Reserve Economic Data)") +
theme(
plot.title.position = "plot",
plot.title = element_textbox_simple(),
plot.subtitle = element_textbox_simple(),
plot.caption = element_markdown(hjust = 0, color = "darkgray"),
plot.caption.position = "plot",
panel.background = element_blank(),
axis.ticks = element_blank(),
axis.text.x = element_text(color = "darkgray"),
panel.grid.major.x = element_line(color = "gray", size = 0.1),
panel.grid.major.y = element_line(color = "gray", size = 0.1, linetype = "dotted")
)
main_plot
main_plot <- ggplot(long_data, aes(x = percent, y = rate_cut, color = change)) +
geom_line(color = "gray", size = 1.5) +
geom_point(size = 2, show.legend = FALSE) +
geom_segment(aes(x = x, xend = xend,
y = rate_cut, yend = rate_cut),
arrow = arrow(length = unit(0.3, "cm")),
color = "black", size = 0.75) +
geom_text(aes(label = glue("{percent}%"), x = bump), size = 4,  show.legend = FALSE) +
scale_color_manual(name = NULL,
breaks = c("precut", "postcut"),
values = c("#727272", "#25607a"),
labels = c("Pre-rate cut", "Post-rate cut")) +
scale_x_continuous(limits = c(2, 12),
breaks = seq(2, 12, by = 2),
labels = glue("{seq(2, 12, by = 2)}%")) +
labs(x = NULL,
y = NULL,
title = "30-year mortgage rate changes post-Fed's Rate Cut Decisions since 1990",
subtitle = "Average impact 0.9% relatively mild, since rate cuts were priced in the markets in advance",
caption = "Source: FRED (Federal Reserve Economic Data)") +
theme(
plot.title.position = "plot",
plot.title = element_textbox_simple(),
plot.subtitle = element_textbox_simple(),
plot.caption = element_markdown(hjust = 0, color = "darkgray"),
plot.caption.position = "plot",
panel.background = element_blank(),
axis.ticks = element_blank(),
axis.text.x = element_text(color = "darkgray"),
panel.grid.major.x = element_line(color = "gray", size = 0.1),
panel.grid.major.y = element_line(color = "gray", size = 0.1, linetype = "dotted")
)
main_plot
## US Federal Rate, 10-year TN and 30-year mortgage rates
library(tidyverse)
library(lubridate)
library(ggtext)
fed_rate <- read_csv("https://fred.stlouisfed.org/graph/fredgraph.csv?bgcolor=%23e1e9f0&chart_type=line&drp=0&fo=open%20sans&graph_bgcolor=%23ffffff&height=450&mode=fred&recession_bars=on&txtcolor=%23444444&ts=12&tts=12&width=1320&nt=0&thu=0&trc=0&show_legend=yes&show_axis_titles=yes&show_tooltip=yes&id=FEDFUNDS&scale=left&cosd=1954-07-01&coed=2024-07-01&line_color=%234572a7&link_values=false&line_style=solid&mark_type=none&mw=3&lw=2&ost=-99999&oet=99999&mma=0&fml=a&fq=Monthly&fam=avg&fgst=lin&fgsnd=2020-02-01&line_index=1&transformation=lin&vintage_date=2024-08-30&revision_date=2024-08-30&nd=1954-07-01") %>%
rename_all(tolower)
treasury_note <- read_csv("https://fred.stlouisfed.org/graph/fredgraph.csv?bgcolor=%23e1e9f0&chart_type=line&drp=0&fo=open%20sans&graph_bgcolor=%23ffffff&height=450&mode=fred&recession_bars=on&txtcolor=%23444444&ts=12&tts=12&width=1320&nt=0&thu=0&trc=0&show_legend=yes&show_axis_titles=yes&show_tooltip=yes&id=DGS10&scale=left&cosd=1962-01-02&coed=2024-08-28&line_color=%234572a7&link_values=false&line_style=solid&mark_type=none&mw=3&lw=2&ost=-99999&oet=99999&mma=0&fml=a&fq=Daily&fam=avg&fgst=lin&fgsnd=2020-02-01&line_index=1&transformation=lin&vintage_date=2024-08-30&revision_date=2024-08-30&nd=1962-01-02") %>%
rename_all(tolower) %>%
rename(tn_10y = dgs10)
# treasury_note %>%
#   mutate(tn_10y = as.numeric(tn_10y, na.rm = TRUE))
#problematic_rows <- treasury_note %>%
# filter(is.na(as.numeric(tn_10y)))
#print(problematic_rows)
treasury_note <- treasury_note %>%
filter(!is.na(tn_10y)) %>%
mutate(tn_10y = suppressWarnings(as.numeric(tn_10y)))
mortgage <- read_csv("https://fred.stlouisfed.org/graph/fredgraph.csv?bgcolor=%23e1e9f0&chart_type=line&drp=0&fo=open%20sans&graph_bgcolor=%23ffffff&height=450&mode=fred&recession_bars=on&txtcolor=%23444444&ts=12&tts=12&width=1320&nt=0&thu=0&trc=0&show_legend=yes&show_axis_titles=yes&show_tooltip=yes&id=MORTGAGE30US&scale=left&cosd=1971-04-02&coed=2024-08-29&line_color=%234572a7&link_values=false&line_style=solid&mark_type=none&mw=3&lw=2&ost=-99999&oet=99999&mma=0&fml=a&fq=Weekly%2C%20Ending%20Thursday&fam=avg&fgst=lin&fgsnd=2020-02-01&line_index=1&transformation=lin&vintage_date=2024-08-30&revision_date=2024-08-30&nd=1971-04-02") %>%
rename_all(tolower)
fedfunds_data <- fed_rate %>%
mutate(date = ymd(date))
treasury_note_data <- treasury_note %>%
mutate(date = ymd(date)) %>%
group_by(month = floor_date(date, "month")) %>%
summarise(tn_10y = mean(tn_10y, na.rm = TRUE))
mortgage_data <- mortgage %>%
mutate(date = ymd(date)) %>%
group_by(month = floor_date(date, "month")) %>%
summarise(mortgage30us = mean(mortgage30us, na.rm = TRUE))
merged_data <- mortgage_data %>%
inner_join(fedfunds_data, by = c("month" = "date")) %>%
inner_join(., treasury_note_data, by = "month")
updates <- tribble(~ month, ~mortgage30us, ~fedfunds, ~tn_10y,
"2024-08-01", 6.35, 5.33, 3.87)
merged_data <- rbind(merged_data, updates)
head(merged_data)
tail(merged_data)
## filtering_date:
filtered_data <- merged_data %>%
filter(month >= "1989-01-01" & month < "2024-09-01")
head(filtered_data, 10)
tail(filtered_data, 10)
long_data <- filtered_data %>%
pivot_longer(cols = -month, names_to = "rates", values_to = "percentage")
ggplot(long_data, aes(x = month, y = percentage, color = rates)) +
geom_line() +
labs(title = "Historical relation between Fedfund Rate, US 10-year Treasury yield, and 30-year mortgage rate",
subtitle = "6 major rate-cuts: 1) Gulf-war, 2) Mid-cycle, 3) Global currency crisis, 4) Dot-com burst & 911, 5) Housing crisis(GFC), 6) Covid-19",
x = NULL, y = NULL,
caption = "Source: FRED(Federal Reserve Economic Data), WSJ"
) +
theme(legend.key = element_blank(),
legend.title = element_blank(),
plot.title.position = "plot",
plot.title = element_textbox_simple(),
plot.subtitle = element_textbox_simple()
)
ggsave("correlation_fedfund_treasury_mortgage.png")
rm(list = ls())
library(tidyverse)
library(lubridate)
library(ggtext)
library(plotly)
fed_rate <- read_csv("https://fred.stlouisfed.org/graph/fredgraph.csv?bgcolor=%23e1e9f0&chart_type=line&drp=0&fo=open%20sans&graph_bgcolor=%23ffffff&height=450&mode=fred&recession_bars=on&txtcolor=%23444444&ts=12&tts=12&width=1320&nt=0&thu=0&trc=0&show_legend=yes&show_axis_titles=yes&show_tooltip=yes&id=FEDFUNDS&scale=left&cosd=1954-07-01&coed=2024-08-01&line_color=%234572a7&link_values=false&line_style=solid&mark_type=none&mw=3&lw=2&ost=-99999&oet=99999&mma=0&fml=a&fq=Monthly&fam=avg&fgst=lin&fgsnd=2020-02-01&line_index=1&transformation=lin&vintage_date=2024-09-12&revision_date=2024-09-12&nd=1954-07-01") %>%
rename_all(tolower)
# updates <- tribble(~date, ~fedfunds,
#                    "2024-08-01", 5.33,
#                    "2024-09-12", 5.33)
#
# fed_rate <- rbind(fed_rate, updates)
tail(fed_rate)
treasury_note <- read_csv("https://fred.stlouisfed.org/graph/fredgraph.csv?bgcolor=%23e1e9f0&chart_type=line&drp=0&fo=open%20sans&graph_bgcolor=%23ffffff&height=450&mode=fred&recession_bars=on&txtcolor=%23444444&ts=12&tts=12&width=1320&nt=0&thu=0&trc=0&show_legend=yes&show_axis_titles=yes&show_tooltip=yes&id=DGS10&scale=left&cosd=1962-01-02&coed=2024-09-10&line_color=%234572a7&link_values=false&line_style=solid&mark_type=none&mw=3&lw=2&ost=-99999&oet=99999&mma=0&fml=a&fq=Daily&fam=avg&fgst=lin&fgsnd=2020-02-01&line_index=1&transformation=lin&vintage_date=2024-09-12&revision_date=2024-09-12&nd=1962-01-02") %>%
rename_all(tolower) %>%
rename(tn_10y = dgs10)
# updates <- tribble(~date, ~tn_10y,
#                    "2024-09-12", 3.69)
#
# treasury_note <- rbind(treasury_note, updates)
tail(treasury_note)
# treasury_note %>%
#   mutate(tn_10y = as.numeric(tn_10y, na.rm = TRUE))
#problematic_rows <- treasury_note %>%
# filter(is.na(as.numeric(tn_10y)))
#print(problematic_rows)
treasury_note <- treasury_note %>%
filter(!is.na(tn_10y)) %>%
mutate(tn_10y = suppressWarnings(as.numeric(tn_10y)))
mortgage <- read_csv("https://fred.stlouisfed.org/graph/fredgraph.csv?bgcolor=%23e1e9f0&chart_type=line&drp=0&fo=open%20sans&graph_bgcolor=%23ffffff&height=450&mode=fred&recession_bars=on&txtcolor=%23444444&ts=12&tts=12&width=1320&nt=0&thu=0&trc=0&show_legend=yes&show_axis_titles=yes&show_tooltip=yes&id=MORTGAGE30US&scale=left&cosd=1971-04-02&coed=2024-09-05&line_color=%234572a7&link_values=false&line_style=solid&mark_type=none&mw=3&lw=2&ost=-99999&oet=99999&mma=0&fml=a&fq=Weekly%2C%20Ending%20Thursday&fam=avg&fgst=lin&fgsnd=2020-02-01&line_index=1&transformation=lin&vintage_date=2024-09-12&revision_date=2024-09-12&nd=1971-04-02") %>%
rename_all(tolower)
# updates <- tribble(~date, ~mortgage30us,
#                    "2024-09-12", 6.30)
#
# mortgage <- rbind(mortgage, updates)
tail(mortgage)
fedfunds_data <- fed_rate %>%
mutate(date = ymd(date))
treasury_note_data <- treasury_note %>%
mutate(date = ymd(date)) %>%
group_by(month = floor_date(date, "month")) %>%
summarise(tn_10y = mean(tn_10y, na.rm = TRUE))
mortgage_data <- mortgage %>%
mutate(date = ymd(date)) %>%
group_by(month = floor_date(date, "month")) %>%
summarise(mortgage30us = mean(mortgage30us, na.rm = TRUE))
merged_data <- mortgage_data %>%
inner_join(fedfunds_data, by = c("month" = "date")) %>%
inner_join(., treasury_note_data, by = "month")
tail(merged_data)
updates <- tribble(~ month, ~mortgage30us, ~fedfunds, ~tn_10y,
"2024-09-01", 6.35, 5.33, 3.75,
"2024-09-12", 6.20, 5.33, 3.70)
merged_data <- rbind(merged_data, updates)
head(merged_data)
tail(merged_data)
## filtering_date:
filtered_data <- merged_data %>%
filter(month >= "1990-01-01" & month < "2024-10-01")
head(filtered_data, 10)
tail(filtered_data, 10)
long_data <- filtered_data %>%
pivot_longer(cols = -month, names_to = "rates", values_to = "percentage")
a <- ggplot(long_data, aes(x = month, y = percentage, color = rates)) +
geom_line() +
labs(title = "Historical relation between Fedfund Rate, US 10-year Treasury yield, and 30-year mortgage rate",
subtitle = "6 major rate-cuts: 1) Gulf-war, 2) Mid-cycle, 3) Global currency crisis, 4) Dot-com burst & 911, 5) Housing crisis(GFC), 6) Covid-19",
x = NULL, y = NULL,
caption = "Source: FRED(Federal Reserve Economic Data), WSJ"
) +
scale_color_manual(values = c("fedfunds" = "#0072B2", "mortgage30us" = "#E69F00", "tn_10y" = "#000000"),
labels = c("fedfunds" = "Federal Fund Rate", "mortgage30us" = "30_year mortgage rate", "tn_10y" = "10-year Treasury Note rate")) +
theme(legend.key = element_blank(),
legend.title = element_blank(),
plot.title.position = "plot",
plot.title = element_textbox_simple(),
plot.subtitle = element_textbox_simple()
)
a +
geom_vline(xintercept = as.numeric(as.Date("1990-07-01")), linetype = "dashed", color = "black") +
geom_vline(xintercept = as.numeric(as.Date("1995-07-01")), linetype = "dashed", color = "black") +
geom_vline(xintercept = as.numeric(as.Date("1998-09-01")), linetype = "dashed", color = "black") +
geom_vline(xintercept = as.numeric(as.Date("2001-01-01")), linetype = "dashed", color = "black") +
geom_vline(xintercept = as.numeric(as.Date("2007-09-01")), linetype = "dashed", color = "black") +
geom_vline(xintercept = as.numeric(as.Date("2019-08-01")), linetype = "dashed", color = "black") +
geom_text(aes(x = as.Date("1990-07-01"), y = 10.5 + 0.5,
label = "1) Gulf-war"), color = "black", angle = 0, vjust = -0.5) +
geom_text(aes(x = as.Date("1995-07-01"), y = 10 + 0.5,
label = "2) Mid-cycle-adjustment"), color = "black", angle = 0, vjust = -0.5) +
geom_text(aes(x = as.Date("1998-09-01"), y = 9.5 + 0.5,
label = "3) Global-currency crisis"), color = "black", angle = 0, vjust = -0.5) +
geom_text(aes(x = as.Date("2001-01-01"), y = 9.0 + 0.5,
label = "4) Doc-com Burst"), color = "black", angle = 0, vjust = -0.5) +
geom_text(aes(x = as.Date("2007-07-01"), y = 8.5 + 0.5,
label = "5) Housing crisis(GFC)"), color = "black", angle = 0, vjust = -0.5) +
geom_text(aes(x = as.Date("2019-08-01"), y = 8.0 + 0.5,
label = "6) Covid-19"), color = "black", angle = 0, vjust = -0.5)
b <- a +
geom_vline(xintercept = as.numeric(as.Date("1990-07-01")), linetype = "dashed", color = "black") +
geom_vline(xintercept = as.numeric(as.Date("1995-07-01")), linetype = "dashed", color = "black") +
geom_vline(xintercept = as.numeric(as.Date("1998-09-01")), linetype = "dashed", color = "black") +
geom_vline(xintercept = as.numeric(as.Date("2001-01-01")), linetype = "dashed", color = "black") +
geom_vline(xintercept = as.numeric(as.Date("2007-09-01")), linetype = "dashed", color = "black") +
geom_vline(xintercept = as.numeric(as.Date("2019-08-01")), linetype = "dashed", color = "black") +
annotate("text", x = as.Date("1990-07-01"), y = 10.5+ 0.5,
label = "1) Gulf-war", color = "black", angle = 0, vjust = -0.5) +
annotate("text", x = as.Date("1995-07-01"), y = 10 + 0.5,
label = "2) Mid-cycle-adjustment", color = "black", angle = 0, vjust = -0.5) +
annotate("text", x = as.Date("1998-09-01"), y = 9.5 + 0.5,
label = "3) Global-currency crisis", color = "black", angle = 0, vjust = -0.5) +
annotate("text", x = as.Date("2001-01-01"), y = 9.0 + 0.5,
label = "4) Doc-com Burst", color = "black", angle = 0, vjust = -0.5) +
annotate("text", x = as.Date("2007-07-01"), y = 8.5 + 0.5,
label = "5) Housing crisis(GFC)", color = "black", angle = 0, vjust = -0.5) +
annotate("text", x = as.Date("2019-08-01"), y = 8.0 + 0.5,
label = "6) Covid-19", color = "black", angle = 0, vjust = -0.5)
b
ggplotly(b)
